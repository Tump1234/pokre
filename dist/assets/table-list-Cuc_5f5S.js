import{d as e,j as a}from"./index-CvTZHx2e.js";import{r as s}from"./redux-vendor-nVRhWwEL.js";import{u as l}from"./6820-t6wN11A0.js";import{u as n}from"./router-vendor-BW0mZDy4.js";import"./react-vendor-B_uAldPx.js";const t=s.memo(({record:e,activePlayers:s,variantLabel:l,onClick:n})=>{var t;const i=`${e.smallBlind.toLocaleString("en-US")}/${e.bigBlind.toLocaleString("en-US")}`,c=null==(t=e.gameVariant)?void 0:t.toLowerCase();return a.jsx("div",{className:`table-card ${c}`,onClick:n,children:a.jsxs("div",{className:"table-info",children:[a.jsx("div",{className:"table-name",children:e.tableName||`Table ${e.tableId}`}),a.jsx("div",{className:"variant",children:l}),a.jsxs("div",{className:"players-num",children:[s,"/",e.maxPlayers]}),a.jsx("div",{className:"buyin-range",children:i})]})})}),i=s.memo(({record:e,activePlayers:s,variantLabel:l,onClick:n})=>{var t;const i=`${e.minBuyIn.toLocaleString("en-US")} / ${e.maxBuyIn.toLocaleString("en-US")}`,c=`${e.smallBlind.toLocaleString("en-US")} / ${e.bigBlind.toLocaleString("en-US")}`,r=null==(t=e.gameVariant)?void 0:t.toLowerCase(),o=Object.values(e.seats||{}).map(e=>(null==e?void 0:e.stack)||0),d=o.length?Math.floor(o.reduce((e,a)=>e+a,0)/o.length):0;return a.jsx("div",{className:`table-card ${r}`,onClick:n,children:a.jsxs("div",{className:"table-info",children:[a.jsx("span",{className:"table-name",children:e.tableName||`Table ${e.tableId}`}),a.jsx("span",{className:"variant",children:l}),a.jsx("span",{className:"stake",children:c}),a.jsxs("span",{className:"jackpot",children:[a.jsx("div",{className:"seat-count",children:e.maxPlayers}),a.jsx("div",{className:"jackpot-icon"}),a.jsx("div",{className:"jackpot-icon-outlined"})]}),a.jsxs("span",{className:"avg-pot",children:[" ",d.toLocaleString("en-US")]}),a.jsxs("span",{className:"players-num",children:[s,"/",e.maxPlayers]}),a.jsx("div",{className:"buyin-range",children:a.jsx("div",{className:"btn-buyin",children:i})})]})})}),c=s.memo(function({isAuthenticated:c,showLoginModal:r,onTableClick:o,onTablesLoaded:d,mobileView:m=!1,refetch:h}){const{data:x}=e(void 0,{skip:!1}),[j,u]=s.useState(""),[b,v]=s.useState(!0),[p,N]=s.useState(!0),[g,k]=s.useState("all"),[y,C]=s.useState(!1),[f,S]=s.useState("all"),[L,w]=s.useState("all"),$=n(),P=l(),U=s.useMemo(()=>{if(!x)return[];const e=e=>Object.values(e.seats||{}).filter(e=>e&&!e.isFolded&&!e.isDisconnected).length;return x.filter(e=>{var a,s;const l=(null==(a=e.gameVariant)?void 0:a.toLowerCase())||"",n=(e.gameVariant||"all").toLowerCase();if(j&&!(null==(s=e.tableName)?void 0:s.toLowerCase().includes(j.toLowerCase())))return!1;const t=Object.keys(e.seats||{}).length;if(!b&&0===t)return!1;if(!p&&t>=e.maxPlayers)return!1;if("all"!==g&&e.maxPlayers!==g)return!1;if("all"!==f&&f!==l)return!1;if("all"!==L){const e={"Аль ч":null,"Тогтсон":"fixed","Пот лимит":"omaha","Хязгааргүй":"texas","Омаха":"omaha","6 хөзөрт Омаха":"6"}[L];if(e&&!n.includes(e))return!1}return!0}).slice().sort((a,s)=>{const l=e(a),n=e(s);return l!==n?n-l:a.bigBlind-s.bigBlind})},[x,j,b,p,g,f,L]),B=s.useCallback(e=>{c?P?$(`/table/${e.secureId}`,{state:{table:e}}):null==o||o(e):null==r||r()},[c,r,o,P]);s.useEffect(()=>{(null==x?void 0:x.length)&&(null==d||d(x))},[x,d]);const V={all:"БҮГД",texas:"ХОЛДЭМ",omaha:"ОМАХА"};return a.jsxs("div",{className:"table-list-container",children:[a.jsx("div",{className:"main-categories",children:["all","texas","omaha"].map(e=>a.jsx("button",{className:"table-category-btn "+(f===e?"active":""),onClick:()=>{S(e),w("all")},children:V[e]},e))}),a.jsx("div",{className:"sub-categories",children:{all:["Аль ч","Тогтсон","Пот лимит","Хязгааргүй"],texas:["Аль ч","Тогтсон","Пот лимит","Хязгааргүй"],omaha:["Аль ч","Омаха","6 хөзөрт Омаха"]}[f].map(e=>a.jsx("button",{className:"table-category-btn "+(L===e?"active":""),onClick:()=>w(e),children:e.toUpperCase()},e))}),a.jsx("div",{className:"table-list-header "+(m?"mobile":"desktop"),children:m?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"table-count",children:["Нийт ширээ: ",U.length]}),a.jsx("div",{className:"reload-table-mobile",onClick:h})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"th-variant",children:"Ширээний нэр"}),a.jsx("span",{className:"th-table",children:"Тоглоом"}),a.jsx("span",{className:"th-players",children:"Стек"}),a.jsx("span",{className:"th-buyin",children:"Төрөл"}),a.jsx("span",{className:"th-buyin",children:"Дундаж Пот"}),a.jsx("span",{className:"th-buyin",children:"Тоглогчид"}),a.jsx("span",{className:"th-buyin",children:"Мин/Макс"})]})}),a.jsx("div",{className:"table-card-container",children:U.map(e=>{var s;const l=Object.keys(e.seats||{}).length,n={texas:"Хязгааргүй Холдем",omaha:"Пот лимит Омаха"}[(null==(s=e.gameVariant)?void 0:s.toLowerCase())??""]??"Unknown";return m?a.jsx(t,{record:e,activePlayers:l,variantLabel:n,mobileView:m,onClick:()=>B(e)},e.tableId):a.jsx(i,{record:e,activePlayers:l,variantLabel:n,mobileView:m,onClick:()=>B(e)},e.tableId)})}),a.jsxs("div",{className:"table-filters",children:[a.jsx("input",{type:"text",className:"table-search",placeholder:"Ширээ хайх...",value:j,onChange:e=>u(e.target.value)}),a.jsx("div",{className:"seat-filter",children:a.jsxs("div",{className:"custom-dropdown "+(y?"open active":""),onClick:()=>C(e=>!e),children:[a.jsx("span",{children:"all"===g?"Бүгд":g}),a.jsxs("div",{className:"dropdown-options "+(y?"open":""),children:[a.jsx("div",{className:"option",onClick:()=>{k("all"),C(!1)},children:"Бүгд"}),a.jsx("div",{className:"option",onClick:()=>{k(6),C(!1)},children:"6 суудал"}),a.jsx("div",{className:"option",onClick:()=>{k(8),C(!1)},children:"8 суудал"})]})]})}),a.jsxs("div",{className:"table-toggles",children:[a.jsxs("div",{className:"toggle-item",children:[a.jsx("span",{children:"Хоосон"}),a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:b,onChange:()=>v(e=>!e)}),a.jsx("span",{className:"slider"})]})]}),a.jsxs("div",{className:"toggle-item",children:[a.jsx("span",{children:"Дүүрэн"}),a.jsxs("label",{className:"switch",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:()=>N(e=>!e)}),a.jsx("span",{className:"slider"})]})]})]}),a.jsx("div",{className:"reload-table",onClick:h})]})]})});export{c as default};
