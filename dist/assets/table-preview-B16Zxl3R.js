import{j as e}from"./index-CvTZHx2e.js";import{r as s,R as a}from"./redux-vendor-nVRhWwEL.js";import{g as l}from"./seatOffsets-BfPDEa1f.js";import{u as r}from"./router-vendor-BW0mZDy4.js";import"./react-vendor-B_uAldPx.js";const i=s.memo(({table:r,className:i})=>{const n=r.maxPlayers||6,t=l(n,!1),c=r.minBuyIn&&r.maxBuyIn?`${r.minBuyIn.toLocaleString()} - ${r.maxBuyIn.toLocaleString()}`:"",d=s.useMemo(()=>Array.from({length:n}).map((e,s)=>{var a;return(null==(a=r.seats)?void 0:a[s])||null}),[r.seats,n]);return e.jsx("div",{className:`table-game-preview ${i||""}`,children:e.jsxs("div",{className:"preview-table-wrapper",children:[e.jsx("div",{className:"poker-table"}),e.jsx("div",{className:"felt-color"}),e.jsx("div",{className:"felt-shadow"}),e.jsxs("div",{className:"buyin-amount",children:["Орох дүн: ",c]}),e.jsx("div",{className:"preview-player-seats",children:d.map((s,l)=>{var r,i,n,c;const d=t[l%t.length],o=!!(null==s?void 0:s.user),m=!0===(null==s?void 0:s.isFolded),v=!0===(null==s?void 0:s.isDisconnected);return e.jsx(a.Fragment,{children:o?e.jsxs("div",{className:"preview-seat-taken "+(m||v?"inactive":""),style:{position:"absolute",left:`${d.x}%`,top:`${d.y}%`,transform:"translate(-50%, -50%)",opacity:m||v?.5:1},children:[e.jsx("div",{className:"preview-player-avatar",children:e.jsx("img",{src:(null==(r=null==s?void 0:s.user)?void 0:r.avatar)||"https://ik.imagekit.io/5sdvi4wig/avatar2.webp?updatedAt=1766326009363",alt:(null==(i=null==s?void 0:s.user)?void 0:i.username)||"Player"})}),e.jsxs("div",{className:"preview-player-info",children:[e.jsx("span",{className:"preview-player-name",children:null==(n=null==s?void 0:s.user)?void 0:n.username}),e.jsx("span",{className:"preview-player-stack",children:null==(c=null==s?void 0:s.stack)?void 0:c.toLocaleString()})]})]}):e.jsx("div",{className:"preview-seat-empty",style:{position:"absolute",left:`${d.x}%`,top:`${d.y}%`,transform:"translate(-50%, -50%)"},children:e.jsx("div",{className:"preview-empty-indicator"})})},l)})})]})})}),n=s.memo(({table:a,isAuthenticated:l,onRequireLogin:n})=>{const t=r(),c=s.useMemo(()=>a?Array.from({length:a.maxPlayers}).map((e,s)=>{var l;return(null==(l=a.seats)?void 0:l[s])||null}):[],[null==a?void 0:a.seats,null==a?void 0:a.maxPlayers]),d=(null==a?void 0:a.tableName)||"";return e.jsx("div",{className:"table-preview-wrapper",children:e.jsxs("div",{className:"table-preview-content",children:[e.jsxs("div",{className:"table-preview-details",children:[e.jsxs("header",{children:[d," #",a.tableId]}),e.jsxs("div",{className:"details-in-table",children:[e.jsxs("div",{className:"player-row header",children:[e.jsx("span",{className:"player-name",children:"Тоглогч"}),e.jsx("span",{className:"player-cash",children:"Мөнгөн дүн"})]}),c.map((s,a)=>{if(!(null==s?void 0:s.user))return null;const l=s.stack??0,r=s.isFolded||s.isDisconnected;return e.jsxs("div",{className:"player-row "+(r?"inactive":""),children:[e.jsx("span",{className:"player-name",children:s.user.username}),e.jsx("span",{className:"player-cash",children:l.toLocaleString("mn-MN")})]},a)})]}),e.jsx("div",{className:"table-image-container",children:e.jsx(i,{table:a,className:"poker-table-preview"})})]}),e.jsxs("div",{className:"preview-buttons",children:[e.jsx("div",{className:"join-btn",onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>{}),l?t(`/table/${a.secureId}`,{state:{table:a}}):n()},children:e.jsx("div",{className:"gradient-bg",children:e.jsx("span",{children:"Ширээ"})})}),e.jsx("div",{className:"close-btn",children:e.jsx("div",{className:"gradient-bg",children:e.jsx("span",{children:"Хүлээлгийн жагсаалт"})})})]})]})})});export{n as default};
