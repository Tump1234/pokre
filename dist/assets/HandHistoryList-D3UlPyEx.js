import{j as s}from"./index-CvTZHx2e.js";import{R as e,r as a}from"./redux-vendor-nVRhWwEL.js";import{P as r}from"./texas-table-game-wTMeuWpu.js";import{u as i}from"./6820-t6wN11A0.js";import"./react-vendor-B_uAldPx.js";import"./router-vendor-BW0mZDy4.js";import"./table-page-DrrpuEVP.js";import"./formatNumber-BK7Si0DQ.js";import"./seatOffsets-BfPDEa1f.js";const n=e.memo(({handHistory:n,isLoading:d=!1,open:o,onClose:l,loadMore:t})=>{const c=i(),[m,h]=e.useState(!1);e.useEffect(()=>{o?requestAnimationFrame(()=>h(!0)):h(!1)},[o]);const j=a.useCallback(e=>(null==e?void 0:e.length)?s.jsx("div",{className:"cards-row",children:e.map((e,a)=>s.jsx("div",{className:"card-wrapper",children:s.jsx(r,{info:{rank:e.rank,suit:e.suit,secret:e.secret??!1}})},a))}):"-",[]),p=a.useCallback(e=>{const a=e??[],i=Array.from({length:5-a.length});return s.jsxs("div",{className:"cards-row",children:[a.map((e,a)=>s.jsx("div",{className:"card-wrapper",children:s.jsx(r,{info:{rank:e.rank,suit:e.suit,secret:e.secret??!1}})},a)),i.map((e,a)=>s.jsx("div",{className:"card-wrapper",children:s.jsx(r,{info:{rank:null,suit:null,secret:!0}})},`b-${a}`))]})},[]),u=a.useMemo(()=>[...n].sort((s,e)=>e.handNumber-s.handNumber).slice(0,50),[n]);return d&&0===n.length?s.jsx("div",{className:"hand-history-loading",children:"Loading hand history..."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hand-history-overlay "+(o?"open":""),onClick:l}),s.jsx("div",{className:`hand-history-panel ${m?"open":""} ${c?"mobile":""}`,children:s.jsxs("div",{className:"hand-history-list",children:[s.jsx("div",{className:"hand-history-title",children:"Гарын түүх"}),u.map((e,a)=>s.jsxs("div",{className:"hand-history-row",children:[s.jsxs("div",{className:"hand-header",children:["#",e.handNumber]}),s.jsxs("div",{className:"winner",children:["Ялагч - ",e.winnerUsername]}),s.jsx("div",{className:"hole-cards",children:j(e.winningHoleCards)}),s.jsx("div",{className:"community-cards",children:p(e.winningCommunityCards)})]},a)),s.jsx("div",{className:"hand-history-load-more",children:s.jsx("button",{onClick:t,disabled:d,children:d?"Уншиж байна...":"Илүү ихийг харах"})}),d&&n.length>0&&s.jsx("div",{className:"hand-history-loading-bottom",children:"Loading more..."})]})})]})},(s,e)=>s.open===e.open&&s.handHistory===e.handHistory&&s.isLoading===e.isLoading);export{n as default};
