import{h as e,j as a,i as s}from"./index-CvTZHx2e.js";import{r as t}from"./redux-vendor-nVRhWwEL.js";import{a as n}from"./index-D65ILaf6.js";import"./react-vendor-B_uAldPx.js";import"./ui-vendor-BXfdezGw.js";function i({withdrawals:s,showHistory:i=!1}){const[l]=e(),[r,d]=t.useState(1),[c,o]=t.useState(15),h=e=>{d(e)},p=s.slice((r-1)*c,r*c),j=Math.ceil(s.length/c);return a.jsxs("div",{className:"admin-table-wrapper",children:[a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"№"}),a.jsx("th",{children:"Хэрэглэгч"}),a.jsx("th",{children:"Хүсэлтийн огноо"}),i&&a.jsx("th",{children:"Батласан огноо"}),a.jsx("th",{children:"Дүн"}),i?a.jsx("th",{children:"Төлөв"}):a.jsx("th",{children:"Үйлдэл"})]})}),a.jsx("tbody",{children:p.map((e,s)=>{var t;const d=new Date(e.createDate),o={month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},h=!e.approvedBy&&!e.approveDate;let p="Хүлээгдэж буй",j="status-pending";(e.approvedBy||e.approveDate)&&(p="Батлагдсан",j="status-approved");const x=e.approveDate?new Date(e.approveDate):null;return a.jsxs("tr",{className:h?"row-pending":"row-approved",children:[a.jsx("td",{className:"table-index",children:(r-1)*c+s+1}),a.jsx("td",{className:"table-user",children:null==(t=e.user)?void 0:t.username}),a.jsx("td",{className:"table-date",children:d.toLocaleString("mn-MN",o)}),i&&a.jsx("td",{className:"table-date",children:x?x.toLocaleString("mn-MN",o):"-"}),a.jsx("td",{className:"table-amount",children:e.amount.toLocaleString("mn-MN")}),a.jsx("td",{className:"table-actions",children:!i&&h?a.jsx("button",{type:"button",className:"btn-icon btn-accept",title:"Батлах",onClick:()=>l({id:e.withdrawalId}),children:a.jsx(n,{size:18})}):a.jsx("span",{className:j,children:p})})]},e.withdrawalId)})})]}),a.jsxs("div",{className:"pagination-controls",children:[a.jsxs("span",{children:["Page ",r," of ",j]}),a.jsx("button",{onClick:()=>h(Math.max(1,r-1)),disabled:1===r,children:"Өмнөх"}),a.jsx("button",{onClick:()=>h(Math.min(j,r+1)),disabled:r===j,children:"Дараагийнх"}),a.jsxs("label",{children:["Items per page:",a.jsx("select",{className:"custom-select",value:c,onChange:e=>{o(Number(e.target.value)),d(1)},children:[10,20,50,100].map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsxs("span",{children:["Нийт: ",s.length]})]})]})}function l(){const{data:e}=s(),[n,l]=t.useState("pending"),r=(null==e?void 0:e.filter(e=>!e.approvedBy&&!e.approveDate))??[],d=(null==e?void 0:e.filter(e=>e.approvedBy||e.approveDate))??[],c=r.length;return a.jsxs("div",{className:"deposit-page-wrapper",children:[c>0&&a.jsx("div",{className:"create-button-container",children:a.jsxs("div",{className:"pending-notification",children:[a.jsx("span",{className:"notification-badge",children:c}),a.jsx("span",{children:"Хүлээгдэж буй татан авалт"})]})}),a.jsxs("div",{className:"deposit-tabs",children:[a.jsxs("button",{className:"deposit-tab "+("pending"===n?"active":""),onClick:()=>l("pending"),children:["Хүлээгдэж буй (",c,")"]}),a.jsxs("button",{className:"deposit-tab "+("history"===n?"active":""),onClick:()=>l("history"),children:["Түүх (",d.length,")"]})]}),"pending"===n?a.jsx(i,{withdrawals:r}):a.jsx(i,{withdrawals:d,showHistory:!0})]})}export{l as default};
