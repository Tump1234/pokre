import{j as e,d as a,w as s,x as l,y as t,z as r,A as n}from"./index-CvTZHx2e.js";import{r as i}from"./redux-vendor-nVRhWwEL.js";import{M as c}from"./index-Cj0LOKaf.js";import{C as d}from"./index-B9j7S_Gp.js";import{d as o,h as m,F as x,i as b,a as h,e as j}from"./index-CmRPyfVs.js";import"./react-vendor-B_uAldPx.js";import"./ui-vendor-BXfdezGw.js";function u({tables:a,editTable:s,deleteTable:l}){const[t,r]=i.useState(1),[n,o]=i.useState(10),m=Math.ceil(a.length/n),x=a.slice((t-1)*n,t*n),b=e=>{e<1||e>m||r(e)};return e.jsxs("div",{className:"admin-table-wrapper",children:[e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Нэр"}),e.jsx("th",{children:"Төрөл"}),e.jsx("th",{children:"Ширээний доод лимит"}),e.jsx("th",{children:"Ширээний дээд лимит"}),e.jsx("th",{children:"Тоглогчийн тоо"}),e.jsx("th",{children:"Small Blind"}),e.jsx("th",{children:"Big Blind"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:x.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.tableName}),e.jsx("td",{children:"TEXAS"===a.gameVariant?"Texas Holdem":"OMAHA"===a.gameVariant?"Omaha":"Unknown"}),e.jsx("td",{children:a.minBuyIn}),e.jsx("td",{children:a.maxBuyIn}),e.jsx("td",{children:a.maxPlayers}),e.jsx("td",{children:a.smallBlind}),e.jsx("td",{children:a.bigBlind}),e.jsxs("td",{className:"actions-cell",children:[e.jsx("button",{className:"btn-action",title:"Edit",onClick:()=>s(a),children:e.jsx(d,{})}),e.jsx("button",{className:"btn-action btn-danger",title:"Delete",onClick:()=>l(a),children:e.jsx(c,{})})]})]},a.tableId))})]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:()=>b(t-1),disabled:1===t,children:"Prev"}),e.jsxs("span",{children:["Хуудас ",t," / ",m||1]}),e.jsx("button",{onClick:()=>b(t+1),disabled:t===m||0===m,children:"Next"}),e.jsx("select",{value:n,onChange:e=>{o(Number(e.target.value)),r(1)},className:"page-size-select",children:[10,20,50,100].map(a=>e.jsxs("option",{value:a,children:[a," / хуудас"]},a))})]})]})}function N(){var c,d,N;const{data:p,refetch:f}=a(),[v,g]=i.useState(""),[y,{isError:B,error:S,isSuccess:k}]=s(),[C,{isError:I,error:P,isSuccess:z}]=l(),[M,{isError:q,error:E,isSuccess:A}]=t(),[T]=r(),[V]=n(),[w,H]=i.useState(null),[O,L]=i.useState(null),[D,F]=i.useState(!1),[R,X]=i.useState({rakePercent:.01,maxPlayers:6});function U(e){const{name:a,value:s}=e.target;X(e=>{if(""===s)return{...e,[a]:""};const l={...e,[a]:["smallBlind","rakePercent","maxPlayers"].includes(a)?Number(s):s};if("smallBlind"===a){const e=Number(s);l.bigBlind=2*e,l.minBuyIn=20*e,l.maxBuyIn=10*l.minBuyIn}return l})}function G(e){if(e.preventDefault(),D)return;F(!0);const a={...R,tableId:null==O?void 0:O.tableId};"edit"===v&&O?C(a):"create"===v&&y(a)}return i.useEffect(()=>{"edit"===v&&O?X(O):"create"===v&&X({rakePercent:.01,maxPlayers:6})},[v,O]),i.useEffect(()=>{var e;if(B){const a="data"in S&&(null==(e=S.data)?void 0:e.errorMessage);H(a),F(!1)}else k&&(H("Ширээ амжилттай үүслээ"),g(""),f(),F(!1))},[B,S,k,f]),i.useEffect(()=>{var e;if(I){const a="data"in P&&(null==(e=P.data)?void 0:e.errorMessage)?"Засахад алдаа гарлаа: "+P.data.errorMessage:"Засахад алдаа гарлаа";H(a),F(!1)}else z&&(H("Ширээ амжилттай засагдлаа"),g(""),f(),F(!1))},[I,P,z,f]),i.useEffect(()=>{var e;if(q){const a="data"in E&&(null==(e=E.data)?void 0:e.errorMessage)?"Устгахад алдаа гарлаа: "+E.data.errorMessage:"Устгахад алдаа гарлаа";H(a)}else A&&(H("Ширээ амжилттай устгагдлаа"),f())},[q,E,A,f]),e.jsxs("div",{className:"admin-table-container",children:[w&&e.jsxs("div",{className:"admin-message",children:[w,"!!!"]}),e.jsx("div",{className:"create-button-container button",children:e.jsxs("button",{className:"create-table-button",onClick:()=>g("create"),title:"Ширээ нэмэх",children:[e.jsx(o,{size:20}),e.jsx("span",{children:"Ширээ үүсгэх"})]})}),v&&e.jsx("div",{className:"create-table-modal-overlay",onClick:()=>g(""),children:e.jsxs("div",{className:"create-table-modal",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"create-table-modal-header",children:[e.jsxs("h2",{className:"create-table-modal-title",children:[e.jsx(m,{size:24}),"create"===v?"Ширээ үүсгэх":"Ширээ засах"]}),e.jsx("button",{className:"create-table-modal-close",onClick:()=>g(""),type:"button",children:e.jsx(x,{size:24})})]}),e.jsx("div",{className:"create-table-modal-body",children:e.jsxs("form",{className:"create-table-form",onSubmit:G,noValidate:!0,children:[e.jsxs("div",{className:"create-table-form-group create-table-form-group-full",children:[e.jsxs("label",{className:"create-table-form-label",children:[e.jsx(m,{size:16}),"Ширээний нэр",e.jsx("span",{className:"create-table-form-label-required",children:"*"})]}),e.jsx("input",{type:"text",name:"tableName",value:R.tableName||"",onChange:U,placeholder:"Жишээ: VIP Ширээ, Анхан шат, Pro ширээ",required:!0,className:"create-table-form-input"}),e.jsxs("span",{className:"create-table-helper-text",children:[e.jsx(b,{size:12}),"Тоглогчид харах нэр"]})]}),e.jsxs("div",{className:"create-table-form-row",children:[e.jsxs("div",{className:"create-table-form-group",children:[e.jsxs("label",{className:"create-table-form-label",children:[e.jsx(m,{size:16}),"Тоглоомын төрөл",e.jsx("span",{className:"create-table-form-label-required",children:"*"})]}),e.jsxs("select",{name:"gameVariant",value:R.gameVariant||"",onChange:U,required:!0,className:"create-table-form-select",children:[e.jsx("option",{value:"",disabled:!0,children:"Сонгох..."}),e.jsx("option",{value:"TEXAS",children:"Texas Hold'em"}),e.jsx("option",{value:"OMAHA",children:"Omaha"})]})]}),e.jsxs("div",{className:"create-table-form-group",children:[e.jsxs("label",{className:"create-table-form-label",children:[e.jsx(h,{size:16}),"Тоглогчдын тоо",e.jsx("span",{className:"create-table-form-label-required",children:"*"})]}),e.jsxs("select",{name:"maxPlayers",value:R.maxPlayers??6,onChange:U,className:"create-table-form-select",required:!0,children:[e.jsx("option",{value:6,children:"6 тоглогч"}),e.jsx("option",{value:8,children:"8 тоглогч"})]})]})]}),e.jsxs("div",{className:"create-table-form-row",children:[e.jsxs("div",{className:"create-table-form-group",children:[e.jsxs("label",{className:"create-table-form-label",children:[e.jsx(j,{size:16}),"Small Blind",e.jsx("span",{className:"create-table-form-label-required",children:"*"})]}),e.jsx("input",{type:"number",name:"smallBlind",value:R.smallBlind??"",onChange:U,min:1,placeholder:"Жишээ: 50, 100, 500",required:!0,className:"create-table-form-input"}),e.jsxs("span",{className:"create-table-helper-text",children:[e.jsx(b,{size:12}),"Бусад утга автоматаар тооцоологдоно"]})]}),e.jsxs("div",{className:"create-table-form-group",children:[e.jsxs("label",{className:"create-table-form-label",children:[e.jsx(j,{size:16}),"Rake хувь",e.jsx("span",{className:"create-table-form-label-required",children:"*"})]}),e.jsxs("select",{name:"rakePercent",value:R.rakePercent??.01,onChange:U,required:!0,className:"create-table-form-select",children:[e.jsx("option",{value:.01,children:"1%"}),e.jsx("option",{value:.02,children:"2%"})]}),e.jsxs("span",{className:"create-table-helper-text",children:[e.jsx(b,{size:12}),"Төлбөрийн хувь"]})]})]}),e.jsx("input",{type:"hidden",name:"bigBlind",value:R.bigBlind??0}),e.jsx("input",{type:"hidden",name:"minBuyIn",value:R.minBuyIn??0}),e.jsx("input",{type:"hidden",name:"maxBuyIn",value:R.maxBuyIn??0}),R.smallBlind&&e.jsxs("div",{className:"create-table-info-box",children:[e.jsxs("div",{className:"create-table-info-title",children:[e.jsx(b,{size:16}),"Автоматаар тооцоологдсон утгууд"]}),e.jsxs("div",{className:"create-table-info-grid",children:[e.jsxs("div",{className:"create-table-info-item",children:[e.jsx("span",{className:"create-table-info-label",children:"Big Blind"}),e.jsxs("span",{className:"create-table-info-value",children:[(null==(c=R.bigBlind)?void 0:c.toLocaleString("mn-MN"))||0,"₮"]})]}),e.jsxs("div",{className:"create-table-info-item",children:[e.jsx("span",{className:"create-table-info-label",children:"Min Buy-in"}),e.jsxs("span",{className:"create-table-info-value",children:[(null==(d=R.minBuyIn)?void 0:d.toLocaleString("mn-MN"))||0,"₮"]})]}),e.jsxs("div",{className:"create-table-info-item",children:[e.jsx("span",{className:"create-table-info-label",children:"Max Buy-in"}),e.jsxs("span",{className:"create-table-info-value",children:[(null==(N=R.maxBuyIn)?void 0:N.toLocaleString("mn-MN"))||0,"₮"]})]}),e.jsxs("div",{className:"create-table-info-item",children:[e.jsx("span",{className:"create-table-info-label",children:"Rake"}),e.jsxs("span",{className:"create-table-info-value",children:[(100*(R.rakePercent??.01)).toFixed(0),"%"]})]})]})]})]})}),e.jsxs("div",{className:"create-table-modal-footer",children:[e.jsx("button",{type:"button",className:"create-table-btn create-table-btn-cancel",onClick:()=>g(""),children:"Болих"}),e.jsxs("button",{type:"submit",className:"create-table-btn create-table-btn-submit",onClick:G,disabled:D,children:[e.jsx(m,{size:18}),"create"===v?"Ширээ үүсгэх":"Ширээ шинэчлэх"]})]})]})}),e.jsx(u,{fetchTables:f,tables:p??[],deleteTable:e=>M(null==e?void 0:e.tableId),editTable:e=>{L(e),g("edit")},startSimulation:T,stopSimulation:V})]})}export{N as default};
