import{H as e,a as s,j as a}from"./index-CvTZHx2e.js";import{E as r,r as l}from"./redux-vendor-nVRhWwEL.js";import{u as o}from"./router-vendor-BW0mZDy4.js";import{b as t}from"./banks-wbT4UHzr.js";import{y as i}from"./ui-vendor-BXfdezGw.js";import"./app-BQ_pikfE.js";import"./react-vendor-B_uAldPx.js";function m({setModalType:m}){const n=o(),d=r(),[c,{isLoading:p,data:u,isError:f,error:h}]=e(),[j,x]=l.useState({email:"",username:"",password:"",passwordRepeat:"",bankName:"",accountNumber:""}),[N,v]=l.useState(!1),[g,w]=l.useState(!1),[b,C]=l.useState("");l.useEffect(()=>{u&&(i.success("Амжилттай бүртгэгдлээ!",{position:"top-right",autoClose:2e3}),localStorage.setItem("accessToken",u.token),d(s(!0)),m(""),n("/"))},[u]),l.useEffect(()=>{var e;if(f){const s=h&&"data"in h&&(null==(e=h.data)?void 0:e.errorMessage)?h.data.errorMessage:"Бүртгэл амжилтгүй. Дахин оролдоно уу.";C(s),i.error(s,{position:"top-right",autoClose:2500})}},[f,h]);const k=e=>{const{name:s,value:a}=e.target;x(e=>({...e,[s]:a}))};return a.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),C(""),j.password!==j.passwordRepeat)return C("Нууц үг таарахгүй байна."),void i.error("Нууц үг таарахгүй байна.",{autoClose:2e3});if(j.password.length<8)return C("Нууц үг багадаа 8 тэмдэгт байх ёстой."),void i.error("Нууц үг багадаа 8 тэмдэгт байх ёстой.",{autoClose:2e3});const s={...j,username:j.username.trim().toLowerCase(),email:j.email.trim().toLowerCase()};c(s)},className:"register-form",children:[a.jsxs("div",{className:"auth-wrapper",children:[a.jsx("header",{className:"auth-header",children:"Бүртгүүлэх"}),a.jsx("div",{className:"auth-close",onClick:()=>m("")})]}),a.jsxs("div",{className:"register-form-fields",children:[b&&a.jsx("div",{className:"form-error",children:b}),a.jsxs("div",{className:"form-field",children:[a.jsx("label",{className:"form-label",children:"И-мэйл"}),a.jsx("input",{name:"email",type:"email",placeholder:"И-мэйл",className:"register-form-input",value:j.email,onChange:k,autoComplete:"email",required:!0})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("label",{className:"form-label",children:"Бүртгүүлэх нэр"}),a.jsx("input",{name:"username",placeholder:"Бүртгүүлэх нэр",className:"register-form-input",value:j.username,onChange:k,autoComplete:"username",required:!0})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("label",{className:"form-label",children:"Нууц үг"}),a.jsxs("div",{className:"password-wrapper",children:[a.jsx("input",{name:"password",type:N?"text":"password",placeholder:"*Нууц үг",className:"register-form-input-custom",value:j.password,onChange:k,autoComplete:"new-password",required:!0}),a.jsx("span",{className:"login-form-toggle-password",onClick:()=>v(e=>!e),children:N?a.jsx("div",{className:"password-toggle eye-open"}):a.jsx("div",{className:"password-toggle eye-closed"})})]})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("label",{className:"form-label",children:"Нууц үгээ дахин оруулна уу"}),a.jsxs("div",{className:"password-wrapper",children:[a.jsx("input",{name:"passwordRepeat",type:g?"text":"password",placeholder:"*Нууц үгээ дахин оруулна уу",className:"register-form-input-custom",value:j.passwordRepeat,onChange:k,autoComplete:"new-password",required:!0}),a.jsx("span",{className:"login-form-toggle-password",onClick:()=>w(e=>!e),children:g?a.jsx("div",{className:"password-toggle eye-open"}):a.jsx("div",{className:"password-toggle eye-closed"})})]})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("label",{className:"form-label",children:"Банк"}),a.jsx("div",{className:"custom-select-wrapper",children:a.jsxs("select",{name:"bankName",className:"custom-bank-select",value:j.bankName,onChange:k,required:!0,children:[a.jsx("option",{value:"",children:"Банк сонгох"}),t.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})})]}),a.jsxs("div",{className:"form-field",children:[a.jsx("label",{className:"form-label",children:"Дансны дугаар"}),a.jsx("input",{name:"accountNumber",type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Дансны дугаар",className:"register-form-input",value:j.accountNumber,onChange:k,required:!0})]})]}),a.jsx("div",{className:"register-form-actions",children:a.jsx("button",{type:"submit",className:"login-form-submit",disabled:p,children:p?"Бүртгэж байна...":"Бүртгүүлэх"})})]})}export{m as default};
