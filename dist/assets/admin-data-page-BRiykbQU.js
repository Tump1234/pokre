import{C as e,j as a,D as t,E as n,F as l}from"./index-CvTZHx2e.js";import{r as s}from"./redux-vendor-nVRhWwEL.js";import{d as r}from"./index-CmRPyfVs.js";import"./react-vendor-B_uAldPx.js";import"./ui-vendor-BXfdezGw.js";function i({setEditBlock:t,onDeleteBlock:n}){const{data:l}=e();return a.jsx("div",{className:"admin-table-wrapper",children:a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[null==l?void 0:l.map(e=>a.jsxs("tr",{children:[a.jsx("td",{children:e.name}),a.jsx("td",{className:"value-cell",children:e.value}),a.jsxs("td",{className:"actions-cell",children:[a.jsx("button",{className:"btn-text",onClick:()=>t(e),children:"Edit"}),a.jsx("button",{className:"btn-action btn-danger",onClick:()=>n(e.name),style:{marginLeft:"8px"},children:"Delete"})]})]},e.name)),l&&0!==l.length?null:a.jsx("tr",{children:a.jsx("td",{colSpan:3,style:{textAlign:"center"},children:"No data blocks found."})})]})]})})}function c(){const[e,c]=s.useState(""),[d,o]=s.useState(),[u,m]=s.useState({name:"",value:""}),[x]=t(),[h]=n(),[j]=l();function v(e){const{name:a,value:t}=e.target;m(e=>({...e,[a]:t}))}function p(){c(""),o(void 0),m({name:"",value:""})}return s.useEffect(()=>{d?(m({name:d.name,value:d.value}),c("edit")):m({name:"",value:""})},[d]),a.jsx("div",{className:"data-page-wrapper",children:a.jsxs("div",{className:"data-page-container",children:[""!==e&&a.jsx("div",{className:"modal-overlay",onClick:p,children:a.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[a.jsx("h2",{children:"create"===e?"Create Data Block":"Edit Data Block"}),"create"===e&&a.jsxs("form",{onSubmit:async function(e){e.preventDefault();try{await x(u).unwrap(),p()}catch(a){}},children:[a.jsxs("label",{children:["Name",a.jsx("input",{type:"text",name:"name",placeholder:"Нэрээ оруулна уу",value:u.name,onChange:v,required:!0})]}),a.jsxs("label",{children:["Value",a.jsx("input",{type:"text",name:"value",placeholder:"Мэдээллээ оруулна уу",value:u.value,onChange:v,required:!0})]}),a.jsx("button",{type:"submit",children:"Create"})]}),"edit"===e&&a.jsxs("form",{onSubmit:async function(e){e.preventDefault();try{await h({name:(null==d?void 0:d.name)??"",block:{name:(null==d?void 0:d.name)??"",value:u.value}}).unwrap(),p()}catch(a){}},children:[a.jsxs("label",{children:["Name",a.jsx("input",{type:"text",name:"name",placeholder:"Нэрээ оруулна уу",value:u.name,onChange:v,required:!0,disabled:!0})]}),a.jsxs("label",{children:["Value",a.jsx("textarea",{name:"value",placeholder:"Мэдээллээ оруулна уу",value:u.value,onChange:v,rows:6,required:!0,className:"value-textarea"})]}),a.jsx("button",{type:"submit",children:"Update"})]})]})}),a.jsx("div",{className:"create-button-container",children:a.jsx("button",{onClick:()=>{c("create"),o(void 0)},title:"Create Data Block","aria-label":"Create Data Block",children:a.jsx(r,{size:20})})}),a.jsx(i,{setEditBlock:o,onDeleteBlock:async function(e){if(window.confirm(`Delete data block "${e}"?`))try{await j(e).unwrap()}catch(a){}}})]})})}export{c as default};
